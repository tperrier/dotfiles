#!/usr/bin/python

# From: http://www.tedunangst.com/flak/post/sct-set-color-temperature

import argparse
import os

def convert_input(input):
    """ Convert command line argument to sct input """
    try:
        return int(input)
    except ValueError as e:
        input = str(input).lower()
        return {'s':20,
                'm':38,
                'd':78,
                'n':100,
                'h':130
                }.get(input[0],100)

def scale_input(input):
    if input < 0:
        input = 0
    elif input > 130:
        input = 130
    return 2000 + input*45

parser = argparse.ArgumentParser(description = "Use Redshift to change temperature")
parser.add_argument('-r','--raw',action='store_true',default=False,help='use raw temperature value')
parser.add_argument('arg',default='normal',
    help = "int in range (10 - 100) (s)mok , (m)ars , (d)ay, (n)ormal, (h)igh"
)

args = parser.parse_args()

if args.raw is True:
    args.value = int(args.arg)
else:
    args.value = scale_input( convert_input(args.arg) )

print "Input: {0.arg} Setting Temperature: {0.value}".format(args)
os.system("redshift -O {}".format(args.value))

